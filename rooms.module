<?php

/**
 * @file
 * Provides basic underlying functionality and configuration options used
 * by all Rooms modules
 */


/**
 * Implements hook_permission().
 */
function rooms_permission() {
  $permissions = array(
    'configure rooms' => array(
      'title' => t('Configure rooms settings'),
      'description' => t('Allows users to configure rooms settings'),
      'restrict access' => TRUE,
    ),
  );

  return $permissions;
}

/**
 * Converts a price to an int for storage in database - we are assuming a currency
 * with pennies, cents or what have you and simple raising by 100.
 *
 * @param $amount
 * The amount to convert to integer
 *
 * @return
 * An integer representhing the currency amount
 *
 * @todo integrate with Drupal Commerce to make use of their fancy currency settings
 */ 
function rooms_price_to_int($amount){
  return (int) $amount * 100;
}



/**
 * Utility function that returns an array with the last day of each month given a year
 *
 * @param $year
 * The year to get the end of month dates for
 *
 * @param $calendar
 * The calendar to use to determine eof dates
 *
 * @return
 * An array keyed by months
 */
function rooms_end_of_month_dates($year = 2011, $calendar = CAL_GREGORIAN){
  
  $end_of_month_dates = array();
  
  for ($i = 1; $i<=12; $i++) {
    $end_of_month_dates[$i] = cal_days_in_month(CAL_GREGORIAN, $i, $year);
  }
  
  return $end_of_month_dates;
}